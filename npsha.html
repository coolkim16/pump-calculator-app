<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NPSHA (유효 흡입 수두) 계산기</title>
<!-- [수정] Google 리디렉션 링크가 아닌, 실제 CDN 주소로 변경했습니다. -->
<script src="https://www.google.com/search?q=https://cdn.tailwindcss.com"></script>
<link href="https://www.google.com/search?q=https://fonts.googleapis.com/css2%3Ffamily%3DInter:wght%40400%3B500%3B600%3B700%26display%3Dswap" rel="stylesheet">
<style>
body { font-family: 'Inter', sans-serif; }
.result-card {
background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
}
.result-value {
color: #1e3a8a; /* Deep blue /
}
.recommendation {
background-color: #e0f2fe; / Light blue /
border-left: 4px solid #0ea5e9; / Sky blue /
}
/ Hide number input spinners */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
-webkit-appearance: none;
margin: 0;
}
input[type=number] {
-moz-appearance: textfield;
}
</style>
</head>
<body class="bg-gray-100 min-h-screen py-12 px-4">
<div class="max-w-4xl mx-auto">
<!-- 메인 화면으로 돌아가기 링크 -->
<div class="mb-6">
<a href="index.html" class="text-blue-600 hover:text-blue-800 transition-colors">
&larr; 메인 화면으로 돌아가기
</a>
</div>

<div class="bg-white shadow-2xl rounded-xl overflow-hidden">
    
    <header class="bg-gradient-to-r from-green-500 to-green-600 p-8 text-white">
        <h1 class="text-4xl font-bold mb-2">NPSHA (유효 흡입 수두) 계산기</h1>
        <p class="text-lg text-green-100">펌프의 캐비테이션을 방지하기 위한 유효 흡입 수두(NPSHA)를 계산합니다.</p>
    </header>
    
    <div class="p-8">
        <form id="npsha-form" class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">

            
            <!-- Section 1: 유체 및 압력 정보 -->
            <section class="md:col-span-1 border-r md:pr-8">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-green-500">1. 유체 및 압력 정보</h2>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label for="sg" class="block text-sm font-medium text-gray-700">비중 (SG)</label>
                        <input type="number" id="sg" step="0.01" value="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                    </div>
                    <div>
                        <label for="pa" class="block text-sm font-medium text-gray-700">표면 절대압력 (Pa)</label>
                        <div class="relative">
                            <input type="number" id="pa" step="0.01" value="1.013" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 pr-12">
                            <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500">bar</span>
                        </div>
                    </div>
                     <div>
                        <label for="pv" class="block text-sm font-medium text-gray-700">포화 증기압 (Pv)</label>
                        <div class="relative">
                            <input type="number" id="pv" step="0.001" value="0.023" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 pr-12">
                            <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500">bar</span>
                        </div>
                    </div>
                    <div>
                        <label for="viscosity_unit" class="block text-sm font-medium text-gray-700">점도 단위</label>
                        <select id="viscosity_unit" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                            <option value="cp" selected>cP (Centipoise)</option>
                            <option value="cst">cSt (Centistokes)</option>
                        </select>
                    </div>
                     <div class="sm:col-span-2">
                        <label for="viscosity" class="block text-sm font-medium text-gray-700">점도 값</label>
                        <input type="number" id="viscosity" step="0.1" value="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                    </div>
                </div>
            </section>

            
            <!-- Section 2: 흡입 배관 정보 -->
            <section class="md:col-span-1">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-green-500">2. 흡입 배관 정보</h2>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label for="hs_type" class="block text-sm font-medium text-gray-700">정적 수두 (hs) 조건</label>
                        <select id="hs_type" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                            <option value="lift" selected>흡상 (펌프가 높음, -hs)</option>
                            <option value="pressure">가압 (펌프가 낮음, +hs)</option>
                        </select>
                    </div>
                    <div>
                        <label for="hs" class="block text-sm font-medium text-gray-700">정적 수두 높이 (hs)</label>
                         <div class="relative">
                            <input type="number" id="hs" step="0.1" value="1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 pr-12">
                            <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500">m</span>
                        </div>
                    </div>
                    <div>
                        <label for="flow_rate_unit" class="block text-sm font-medium text-gray-700">펌프 토출 유량 단위</label>
                        <select id="flow_rate_unit" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                            <option value="l_min" selected>ℓ/min</option>
                            <option value="m3_h">㎥/h</option>
                            <option value="m3_min">㎥/min</option>
                        </select>
                    </div>
                    <div>
                        <label for="flow_rate" class="block text-sm font-medium text-gray-700">유량 값</label>
                        <input type="number" id="flow_rate" step="1" value="100" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                    </div>
                    <div>
                        <label for="d1" class="block text-sm font-medium text-gray-700">흡입 배관 내경 (d)</label>
                        <div class="relative">
                            <input type="number" id="d1" step="0.1" value="25" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 pr-12">
                            <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500">mm</span>
                        </div>
                    </div>
                    <div>
                        <label for="l" class="block text-sm font-medium text-gray-700">흡입 배관 길이 (l)</label>
                         <div class="relative">
                            <input type="number" id="l" step="0.1" value="5" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500 pr-12">
                            <span class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500">m</span>
                        </div>
                    </div>
                    <div class="sm:col-span-2">
                        <label for="pump_type" class="block text-sm font-medium text-gray-700">펌프 왕복식 타입</label>
                        <select id="pump_type" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500">
                            <option value="simplex" selected>정량펌프 1연식</option>
                            <option value="duplex">정량펌프 2연식</option>
                            <option value="smoothy">스무디 정량펌프</option>
                        </select>
                    </div>
                </div>
            </section>
        </form>

        
        <!-- Section 3: 계산 결과 -->
        <section class="mt-10">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 pb-2 border-b-2 border-green-500">3. 계산 결과</h2>
            
            
            <div class="result-card rounded-xl shadow-lg p-8">
                <div class="text-center">
                    <span class="text-lg font-medium text-gray-700">유효 흡입 수두 (NPSHA)</span>
                    <h3 id="result-npsha" class="result-value text-7xl font-extrabold my-4">0.00 m</h3>
                </div>
                
                
                <div class="recommendation p-4 rounded-md text-sm text-blue-800 mt-6">
                    <p>권장 NPSHR (펌프 요구값) <span id="result-npshr" class="font-bold text-lg">0.00 m</span> 이하인 펌프를 선정해야 합니다. (안전율 1.3 적용)</p>
                </div>
            </div>

            
            <!-- 계산 상세 -->
            <div class="mt-8">
                <h4 class="text-xl font-semibold text-gray-700 mb-3">계산 상세 (참고)</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 bg-gray-50 p-6 rounded-lg border">
                    <div>
                        <span class="block text-sm text-gray-600">압력 수두 (Pa/γ)</span>
                        <span id="detail-pa-head" class="text-lg font-bold text-gray-900">0.00 m</span>
                    </div>
                    <div>
                        <span class="block text-sm text-gray-600">증기압 수두 (Pv/γ)</span>
                        <span id="detail-pv-head" class="text-lg font-bold text-gray-900">0.00 m</span>
                    </div>
                    <div>
                        <span class="block text-sm text-gray-600">정적 수두 (±hs)</span>
                        <span id="detail-hs" class="text-lg font-bold text-gray-900">0.00 m</span>
                    </div>
                    <div>
                        <span class="block text-sm text-gray-600">손실 수두 (hf)</span>
                        <span id="detail-hf" class="text-lg font-bold text-gray-900">0.00 m</span>
                    </div>
                     <div>
                        <span class="block text-sm text-gray-600">평균 유속 (V_avg)</span>
                        <span id="detail-v-avg" class="text-lg font-bold text-gray-900">0.00 m/s</span>
                    </div>
                     <div>
                        <span class="block text-sm text-gray-600">최대 유속 (V_max)</span>
                        <span id="detail-v-max" class="text-lg font-bold text-gray-900">0.00 m/s</span>
                    </div>
                    <div>
                        <span class="block text-sm text-gray-600">레이놀즈 수 (Re)</span>
                        <span id="detail-re" class="text-lg font-bold text-gray-900">0</span>
                    </div>
                    <div>
                        <span class="block text-sm text-gray-600">관 마찰 계수 (f)</span>
                        <span id="detail-f" class="text-lg font-bold text-gray-900">0.000</span>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>


</div>

<script>
// 전역 상수 선언 (오류 방지를 위해 var 사용)
var G = 9.8; // 중력가속도 (m/s^2)
var H_CONST = 10.197; // 1 bar 를 mH2O (물 수두)로 변환하는 상수
var RE_CRITICAL = 2300; // 층류-난류 임계 레이놀즈 수

// DOM 요소 가져오기
const form = document.getElementById(&#39;npsha-form&#39;);
const inputs = form.querySelectorAll(&#39;input, select&#39;);

// 결과 표시 요소
const resultNPSHA = document.getElementById(&#39;result-npsha&#39;);
const resultNPSHR = document.getElementById(&#39;result-npshr&#39;);

// 상세 결과 표시 요소
const detailPaHead = document.getElementById(&#39;detail-pa-head&#39;);
const detailPvHead = document.getElementById(&#39;detail-pv-head&#39;);
const detailHs = document.getElementById(&#39;detail-hs&#39;);
const detailHf = document.getElementById(&#39;detail-hf&#39;);
const detailVavg = document.getElementById(&#39;detail-v-avg&#39;);
const detailVmax = document.getElementById(&#39;detail-v-max&#39;);
const detailRe = document.getElementById(&#39;detail-re&#39;);
const detailF = document.getElementById(&#39;detail-f&#39;);

/**
 * 입력값을 숫자로 변환합니다. 유효하지 않으면 0을 반환합니다.
 */
function getNumber(id) {
    const val = document.getElementById(id).value;
    return parseFloat(val) || 0;
}

/**
 * 유량 단위를 m^3/s 로 변환합니다.
 */
function convertFlowRate(value, unit) {
    switch (unit) {
        case &#39;l_min&#39;: // L/min to m^3/s
            return value / 1000 / 60;
        case &#39;m3_h&#39;: // m^3/h to m^3/s
            return value / 3600;
        case &#39;m3_min&#39;: // m^3/min to m^3/s
            return value / 60;
        default:
            return 0;
    }
}

/**
 * 점도 단위를 m^2/s (동점성 계수)로 변환합니다.
 */
function convertViscosity(viscosity, unit, sg) {
    if (sg === 0) return 0;
    switch (unit) {
        case &#39;cp&#39;: // cP to m^2/s (Kinematic Viscosity)
            // 1 cP = 1 mPa·s
            // Dynamic Viscosity (Pa·s) = cP / 1000
            // Density (kg/m^3) = SG * 1000
            // Kinematic Viscosity (m^2/s) = Dynamic / Density
            return (viscosity / 1000) / (sg * 1000);
        case &#39;cst&#39;: // cSt to m^2/s
            // 1 cSt = 1 mm^2/s = 1e-6 m^2/s
            return viscosity / 1000000;
        default:
            return 0;
    }
}

/**
 * 유속 (V, m/s)을 계산합니다.
 * Q: m^3/s, D: mm
 */
function calculateVelocity(Q_m3s, D_mm) {
    if (D_mm === 0) return 0;
    const d_m = D_mm / 1000; // mm to m
    const area = Math.PI * Math.pow(d_m, 2) / 4; // m^2
    if (area === 0) return 0;
    return Q_m3s / area; // m/s
}

/**
 * 레이놀즈 수 (Re)를 계산합니다.
 * V: m/s, d: m, nu: m^2/s
 */
function calculateReynolds(V, d_m, nu) {
    if (nu === 0) return 0;
    return (V * d_m) / nu;
}

/**
 * 관 마찰 계수 (f)를 계산합니다.
 * Re &lt; 2300 (층류): f = 64 / Re
 * Re &gt; 2300 (난류): f = 0.03 (사용자 정의)
 */
function calculateFrictionFactor(Re) {
    if (Re === 0) return 0;
    if (Re &lt;= RE_CRITICAL) {
        return 64 / Re;
    } else {
        return 0.03;
    }
}

/**
 * 흡입측 손실 수두 (hf, m)를 계산합니다. (Darcy-Weisbach)
 * f: unitless, l: m, d: m, V: m/s, g: m/s^2
 */
function calculateFrictionHeadLoss(f, l_m, d_m, V_m_s) {
    if (d_m === 0) return 0;
    return f * (l_m / d_m) * (Math.pow(V_m_s, 2) / (2 * G));
}

/**
 * 펌프 타입에 따른 유속 승수를 반환합니다.
 */
function getVelocityMultiplier(pumpType) {
    switch (pumpType) {
        case &#39;simplex&#39;: // 1연식
            return Math.PI;
        case &#39;duplex&#39;: // 2연식
            return Math.PI / 2;
        case &#39;smoothy&#39;: // 스무디
            return 1.0;
        default:
            return 1.0;
    }
}

/**
 * 모든 값을 기반으로 NPSHA를 계산합니다.
 */
function calculateNPSHA() {
    // 1. 입력 값 가져오기
    const sg = getNumber(&#39;sg&#39;);
    const Pa_bar = getNumber(&#39;pa&#39;);
    const Pv_bar = getNumber(&#39;pv&#39;);
    
    const viscosity = getNumber(&#39;viscosity&#39;);
    const viscosity_unit = document.getElementById(&#39;viscosity_unit&#39;).value;
    
    const hs_type = document.getElementById(&#39;hs_type&#39;).value;
    const hs = getNumber(&#39;hs&#39;);
    
    const flow_rate = getNumber(&#39;flow_rate&#39;);
    const flow_rate_unit = document.getElementById(&#39;flow_rate_unit&#39;).value;
    
    const D1_mm = getNumber(&#39;d1&#39;);
    const l_m = getNumber(&#39;l&#39;);
    const pump_type = document.getElementById(&#39;pump_type&#39;).value;

    // 2. 압력 수두 계산 (Pa/γ, Pv/γ)
    // (bar * 10.197 mH2O/bar) / SG = m (actual fluid)
    const Pa_head = (sg &gt; 0) ? (Pa_bar * H_CONST) / sg : 0;
    const Pv_head = (sg &gt; 0) ? (Pv_bar * H_CONST) / sg : 0;

    // 3. 정적 수두 계산 (±hs)
    const hs_term = (hs_type === &#39;lift&#39;) ? -hs : hs;

    // 4. 흡입측 손실 수두 (hf) 계산
    // 4a. 유량 (m^3/s)
    const Q_m3s = convertFlowRate(flow_rate, flow_rate_unit);
    
    // 4b. 평균 유속 (V_avg, m/s)
    const V_avg = calculateVelocity(Q_m3s, D1_mm);

    // 4c. 최대 유속 (V_max, m/s)
    const v_multiplier = getVelocityMultiplier(pump_type);
    const V_max = V_avg * v_multiplier;
    
    // 4d. 배관 내경 (d, m)
    const d_m = D1_mm / 1000;
    
    // 4e. 동점성 계수 (nu, m^2/s)
    const nu = convertViscosity(viscosity, viscosity_unit, sg);
    
    // 4f. 레이놀즈 수 (Re) - 최대 유속 기준
    const Re = calculateReynolds(V_max, d_m, nu);
    
    // 4g. 관 마찰 계수 (f) - 최대 유속 기준
    const f = calculateFrictionFactor(Re);
    
    // 4h. 손실 수두 (hf) - 최대 유속 기준
    const hf = calculateFrictionHeadLoss(f, l_m, d_m, V_max);

    // 5. 최종 NPSHA 계산
    // NPSHA = (Pa/γ) - (Pv/γ) ± hs - hf
    const NPSHA = Pa_head - Pv_head + hs_term - hf;
    
    // 6. 권장 NPSHR 계산
    const NPSHR_rec = NPSHA / 1.3;

    // 7. 결과 표시
    resultNPSHA.textContent = `${NPSHA.toFixed(2)} m`;
    resultNPSHR.textContent = `${NPSHR_rec.toFixed(2)} m`;
    
    // 8. 상세 정보 표시
    detailPaHead.textContent = `${Pa_head.toFixed(2)} m`;
    detailPvHead.textContent = `${Pv_head.toFixed(2)} m`;
    detailHs.textContent = `${hs_term.toFixed(2)} m`;
    detailHf.textContent = `${hf.toFixed(2)} m`;
    detailVavg.textContent = `${V_avg.toFixed(3)} m/s`;
    detailVmax.textContent = `${V_max.toFixed(3)} m/s`;
    detailRe.textContent = `${Re.toFixed(0)}`;
    detailF.textContent = `${f.toFixed(3)}`;
}

// 폼 입력값이 변경될 때마다 실시간으로 계산
inputs.forEach(input =&gt; {
    input.addEventListener(&#39;input&#39;, calculateNPSHA);
});

// 페이지 로드 시 초기 계산 수행
document.addEventListener(&#39;DOMContentLoaded&#39;, calculateNPSHA);


</script>

</body>
</html>
